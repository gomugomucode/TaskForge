<!DOCTYPE html>
<html>
<head>
    <title>TaskForge</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>


<body>
    <h1>TaskForge</h1>

  <div class="controls">
    <form method="get" action="{{ url_for('index') }}" class="search-form">
        <input type="text" name="q" placeholder="Search tasks..." value="{{ query }}" class="search-input">
        <button type="submit" class="btn">Search</button>
    </form>
    <a href="{{ url_for('add_task') }}" class="add-task-link">Add New Task</a>
</div>
    {% if tasks %}
    <table border="1">
        <tr>
            <th>S.No.</th>
            <th>Title</th>
            <th>Deadline</th>
            <th>Priority</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
        {% for task in tasks %}
        <tr>
            <td>{{ loop.index }}</td>
            <td class="{% if task.status == 'Completed' %}completed{% endif %}">
                {{ task.title }}
            </td>

            <td>{{ task.deadline }}</td>
            <td>{{ task.priority }}</td>
            <td>{{ task.status }}</td>
            <td>
                <a href="{{ url_for('toggle_task', index=loop.index0) }}">
                    {% if task.status != 'Completed' %}
                     Mark Done
                    {% else %}
                     Undo
                    {% endif %}
                </a>
                |
                <a href="{{ url_for('delete_task', index=loop.index0) }}"> Delete</a>
            </td>

        </tr>
        {% endfor %}
    </table>
    {% else %}
    <p>No tasks yet.</p>
    {% endif %}

</body>

</html>